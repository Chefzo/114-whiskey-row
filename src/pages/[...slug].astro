---
import { SEO } from '@wix/seo/components';
import { loadSEOTagsServiceConfig } from '@wix/seo/services';
import { Head } from "@/components/Head";
import AppRouter from "@/components/Router";
import "@wix/wix-vibe-plugins/plugins-vars.css";
import "@wix/wix-vibe-plugins/plugins-theme.css";
import "@/styles/critical.css";
import "@/styles/global.css";

const seoTagsServiceConfig = await loadSEOTagsServiceConfig({
  pageUrl: Astro.url.href,
  itemData: {
    pageName: 'Home',
  },
});
---

<html lang="en" class="w-full h-full">
  <head>
    <!-- Early Connection Hints for Wix Services - Performance Optimization -->
    <link rel="preconnect" href="https://wixapis.com" />
    <link rel="preconnect" href="https://edge.wixapis.com" />
    <link rel="preconnect" href="https://static.parastorage.com" />
    <link rel="dns-prefetch" href="https://www.googletagmanager.com" />
    
    <!-- Defer Google Analytics - Load after first paint -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JMM17LNJXM"></script>
    <script defer>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-JMM17LNJXM');
    </script>
    
    <!-- Defer Google Tag Manager - Load after first paint -->
    <script defer>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.defer=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WMRZT82N');
    </script>
    
    <Head />
    <SEO.Tags seoTagsServiceConfig={seoTagsServiceConfig} slot="seo-tags" />
  </head>
  <body class="w-full h-full">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMRZT82N"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="root" class="w-full h-full">
      <AppRouter client:only="react" />
    </div>
  </body>
</html>
